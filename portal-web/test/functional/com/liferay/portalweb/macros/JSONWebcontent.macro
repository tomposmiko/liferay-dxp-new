definition {

	macro _addWebContent {
		var portalURL = JSONCompany.getPortalURL();

		var titleMap = '''{"en_US":"${title}"}''';

		if (isSet(description)) {

			var descriptionMap = '''{"en_US":"${description}"}''';
		}
		else {
			var descriptionMap = "{}";
		}

		if (!(isSet(folderId))) {
			var folderId = "0";
		}

		if (!(isSet(serviceContext))) {
			var serviceContext = "{}";
		}

		var contentXML = JSONWebcontent._convertToXML(content = "${content}");

		var curl = '''
			${portalURL}/api/jsonws/journal.journalarticle/add-article \
				-u test@liferay.com:test \
				-d groupId=${groupId} \
				-d folderId=${folderId} \
				-d titleMap=${titleMap} \
				-d descriptionMap=${descriptionMap} \
				-d content=${contentXML} \
				-d ddmStructureKey=BASIC-WEB-CONTENT \
				-d ddmTemplateKey=BASIC-WEB-CONTENT \
				-d serviceContext=${serviceContext}
		''';

		var groupName = JSONGroup._getGroupName(groupId = "${groupId}");

		echo("## Create a 'Web Content' with the following info using JSONWS:");

		echo("## * Group Name: ${groupName}");

		echo("## * Folder Id: ${folderId}");

		echo("## * Title: ${title}");

		echo("## * Description: ${description}");

		echo("## * Content: ${content}");

		com.liferay.poshi.runner.util.JSONCurlUtil.post("${curl}");
	}

	macro _convertToXML {

		var contentXML = '''<root available-locales="en_US" default-locale="en_US"> <dynamic-element name="content" type="text_area" index-type="text"> <dynamic-content language-id="en_US">${content}</dynamic-content> </dynamic-element> </root> ''';

		return "${contentXML}";
	}

	macro addWebContent {
		if (!(isSet(content))) {
			fail("Please set 'content.'");
		}

		if (isSet(groupName)) {
			var groupId = JSONGroup._getGroupIdByName(groupName = "${groupName}");
		}
		else {
			fail("Please set 'groupName' to get groupId.");
		}

		if (!(isSet(title))) {
			fail("Please set 'title.'");
		}

		JSONWebcontent._addWebContent(
			content = "${content}",
			description = "${description}",
			folderId = "${folderId}",
			groupId = "${groupId}",
			serviceContext = "${serviceContext}",
			title = "${title}"
		);
	}
}