definition {

	@summary = "Install the following patch onto Liferay Portal. ${patchFileZipUrl}"
	macro installPatch {
		if (!(contains("${patchFileZipUrl}", "dxp-0-"))) {
			AntCommand(
				locator1 = "build-test.xml",
				value1 = "install-patch -Dpatch.file.zip.url=${patchFileZipUrl}");
		}
		else {
			echo("No previous fix pack available to install");
		}
	}

	@summary = "Install the following patch onto Liferay Portal server with port ${nodePort}: ${patchFileZipUrl}"
	macro installPatchOnSpecificServer {
		var leadingPortNumber = StringUtil.replace("${nodePort}", "080", "");
		var bundleIndex = ${leadingPortNumber} - 8;

		if (!(contains("${patchFileZipUrl}", "dxp-0-"))) {
			AntCommand(
				locator1 = "build-test.xml",
				value1 = "install-patch -Dpatch.file.zip.url=${patchFileZipUrl} -Dinstall.patch.cluster.node.index=${bundleIndex}");
		}
		else {
			echo("No previous fix pack available to install");
		}
	}

	@summary = "Uninstall all patches from Liferay Portal."
	macro uninstallPatches {
		AntCommand(
			locator1 = "build-test.xml",
			value1 = "uninstall-patches");
	}

	@summary = "Uninstall the following patch onto Liferay Portal server with port ${nodePort}"
	macro uninstallPatchOnSpecificServer {
		var leadingPortNumber = StringUtil.replace("${nodePort}", "080", "");
		var bundleIndex = ${leadingPortNumber} - 8;

		AntCommand(
			locator1 = "build-test.xml",
			value1 = "uninstall-patches -Duninstall.patch.cluster.node.index=${bundleIndex}");
	}

	@summary = "Update the following osgi configuration onto Liferay Portal server with port ${nodePort}: ${updateConfiguration}"
	macro updateConfigurationOnSpecificServer {
		var leadingPortNumber = StringUtil.replace("${nodePort}", "080", "");
		var bundleIndex = ${leadingPortNumber} - 8;

		AntCommand(
			locator1 = "build-test.xml",
			value1 = "update-osgi-module-configuration -Dupdate.configuration=&quot;${updateConfiguration}&quot; -Dinstall.patch.cluster.node.index=${bundleIndex}");
	}

}