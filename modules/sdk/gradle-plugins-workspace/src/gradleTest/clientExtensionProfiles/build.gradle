task runGradleTest

runGradleTest {
	dependsOn ":client-extension:deployDev"

	doLast {
		Project clientExtensionProject = project ":client-extension"

		File clientExtensionBuildDir = new File(clientExtensionProject.buildDir, "liferay-client-extension-build")

		File clientExtensionConfigJSONFile = new File(clientExtensionBuildDir, "client-extension.client-extension-config.json")

		assert !clientExtensionConfigJSONFile.text.contains("key=foo")

		assert clientExtensionConfigJSONFile.text.contains("key=bar")

		File fooFile = new File(clientExtensionBuildDir, "static/foo.txt")

		assert !fooFile.exists()

		File barFile = new File(clientExtensionBuildDir, "static/bar.txt")

		assert barFile.exists()
	}
}