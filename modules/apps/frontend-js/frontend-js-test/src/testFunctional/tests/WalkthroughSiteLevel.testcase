@component-name = "portal-frontend-infrastructure"
definition {

	property osgi.modules.includes = "frontend-js-walkthrough-sample-web";
	property portal.release = "true";
	property portal.upstream = "true";
	property testray.component.names = "Walkthrough";
	property testray.main.component.name = "User Interface";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			JSONGroup.deleteGroupByName(groupName = "Site Name");
		}
	}

	@description = "LPS-159823. When skippable is set to true, checked and ends all steps the hotspot element is not present."
	@priority = "3"
	test CanEnableSkippable {
		property portal.acceptance = "true";

		task ("Given walkthrough enabled site-level") {
			Walkthrough.setupWalkthroughPage(filename = "walkthrough_configuration_single_page.json");
		}

		task ("And When navigate to second step") {
			Walkthrough.goToSpecificStep(key_step = "2");
		}

		task ("And When enable Do not show me this again") {
			Check.checkNotVisible(
				checkboxName = "Do not show me this again.",
				locator1 = "Checkbox#ANY_CHECKBOX");
		}

		task ("And When navigate to next step") {
			Walkthrough.goToNextStep(key_step = "3");
		}

		task ("And When click ok to finish the steps") {
			Click(
				key_text = "Close",
				locator1 = "Button#ANY");
		}

		task ("Then popover mode is not present") {
			AssertElementNotPresent(
				key_title = "",
				locator1 = "Walkthrough#HOTSPOT");
		}
	}

}