{namespace Select}

{template .render}
	{@param strings: [chooseAnOption: string]}
	{@param? _handleClick: any}
	{@param? _handleItemClicked: any}
	{@param? disableEmptyOption: bool}
	{@param? fixedOptions: list<[
		checked: bool,
		disabled: bool,
		id: string,
		inline: bool,
		label: string,
		name: string,
		showLabel: bool,
		value: string
	]>}
	{@param? id: string}
	{@param? label: string}
	{@param? open: bool}
	{@param? options: list<[
		checked: bool,
		disabled: bool,
		id: string,
		inline: bool,
		label: string,
		name: string,
		showLabel: bool,
		value: string
	]>}
	{@param? placeholder: string}
	{@param? predefinedValue: string}
	{@param? readOnly: bool}
	{@param? repeatable: bool}
	{@param? required: bool}
	{@param? selectedLabel: string}
	{@param? showLabel: bool}
	{@param? spritemap: string}
	{@param? tip: string}
	{@param? value: string}

	{call FieldBase.render}
		{param contentRenderer kind="html"}
			{call .content}
				{param _handleClick: $_handleClick /}
				{param _handleItemClicked: $_handleItemClicked /}
				{param disableEmptyOption: $disableEmptyOption /}
				{param fixedOptions: $fixedOptions /}
				{param id: $id /}
				{param open: $open /}
				{param options: $options /}
				{param placeholder: $placeholder /}
				{param predefinedValue: $predefinedValue /}
				{param readOnly: $readOnly /}
				{param selectedLabel: $selectedLabel /}
				{param spritemap: $spritemap /}
				{param strings: $strings /}
				{param value: $value /}
			{/call}
		{/param}

		{param id: $id /}
		{param label: $label /}
		{param repeatable: $repeatable /}
		{param required: $required /}
		{param showLabel: $showLabel /}
		{param spritemap: $spritemap /}
		{param tip: $tip /}
	{/call}
{/template}

{template .content}
	{@param strings: [chooseAnOption: string]}
	{@param? _handleItemClicked: any}
	{@param? _handleClick: any}
	{@param? disableEmptyOption: bool}
	{@param? fixedOptions: list<[
		checked: bool,
		disabled: bool,
		id: string,
		inline: bool,
		label: string,
		name: string,
		showLabel: bool,
		value: string
	]>}
	{@param? id: string}
	{@param? open: bool}
	{@param? options: list<[
		checked: bool,
		disabled: bool,
		id: string,
		inline: bool,
		label: string,
		name: string,
		showLabel: bool,
		value: string
	]>}
	{@param? placeholder: string}
	{@param? readOnly: bool}
	{@param? selectedLabel: string}
	{@param? spritemap: string}

	<div class="form-builder-select-field input-group-container">
		{let $attributes kind="attributes"}
			class="form-control select-field-trigger"

			{if $id}
				id="{$id}"
			{/if}

			{if $readOnly}
				disabled
			{/if}

			data-onclick="{$_handleClick}"
		{/let}

		<div {$attributes}>
			{if $selectedLabel}
				<div class="option-selected">{$selectedLabel}</div>
			{else}
				<div class="option-selected option-selected-placeholder">{$placeholder}</div>
			{/if}

			<a class="select-arrow-down-container" href="javascript:;">
				{if $spritemap}
					{call ClayIcon.render}
						{param spritemap: $spritemap /}
						{param symbol: 'caret-double' /}
					{/call}
				{/if}
			</a>
		</div>
	</div>

	{call .listItems}
		{param _handleItemClicked: $_handleItemClicked /}
		{param disableEmptyOption: $disableEmptyOption /}
		{param fixedOptions: $fixedOptions /}
		{param open: $open /}
		{param options: $options /}
		{param placeholder: $placeholder /}
		{param strings: $strings /}
	{/call}
{/template}

{template .listItems}
	{@param strings: [chooseAnOption: string]}
	{@param? _handleItemClicked: any}
	{@param? disableEmptyOption: bool}
	{@param? fixedOptions: list<[
		checked: bool,
		disabled: bool,
		id: string,
		inline: bool,
		label: string,
		name: string,
		showLabel: bool,
		value: string
	]>}
	{@param? open: bool}
	{@param? options: list<[
		checked: bool,
		disabled: bool,
		id: string,
		inline: bool,
		label: string,
		name: string,
		showLabel: bool,
		value: string
	]>}
	{@param? placeholder: string}

	{let $attributes kind="attributes"}
		class="dropdown-menu

		{if $open}
			{sp}dropdown-opened
		{/if}
		"
		data-onclick="{$_handleItemClicked}"

	{/let}

	{if $options}
		<div {$attributes}>
			<ul class="list-unstyled">
				{if not $disableEmptyOption}
					<li class="dropdown-item" data-option-value="">{$placeholder or $strings.chooseAnOption}</li>
				{/if}

				{if length($options) > 0}
					{foreach $option in $options}
						<li class="dropdown-item" data-option-value="{$option.value}">{$option.label}</li>
					{/foreach}
				{/if}

				{if $fixedOptions and length($fixedOptions) > 0}
					<li class="dropdown-divider"></li>

					{foreach $fixedOption in $fixedOptions}
						<li class="dropdown-item"  data-option-value="{$fixedOption.value}">{$fixedOption.label}</li>
					{/foreach}
				{/if}
			</ul>
		</div>
	{/if}
{/template}